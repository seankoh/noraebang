<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ÎÖ∏ÎûòÎ∞©</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { background-color: #030712; }
    .lrc-line { transition: color 0.2s, font-size 0.2s, font-weight 0.2s; color: #6b7280; font-size: 1rem; padding: 0.4rem 0.5rem; text-align: center; cursor: pointer; }
    .lrc-line.active { color: #fbbf24; font-size: 1.2rem; font-weight: 700; text-shadow: 0 0 16px rgba(251,191,36,0.5); }
    .lrc-line:hover { color: #d1d5db; }
    #lyrics-panel { scroll-behavior: smooth; }
    #theater-overlay { display: none; }
    body.theater #lyrics-col { display: none; }
    body.theater #video-col { width: 100%; }
  </style>
</head>
<body class="text-gray-100 min-h-screen">

  <!-- Navbar -->
  <nav class="sticky top-0 z-50 bg-gray-900/90 backdrop-blur border-b border-gray-800 px-4 py-3">
    <div class="max-w-7xl mx-auto flex items-center gap-4">
      <a href="/" class="text-2xl font-bold text-amber-400 shrink-0">ÎÖ∏ÎûòÎ∞©</a>
      <form action="/search.html" class="flex-1 max-w-xl" method="get">
        <input name="q" type="search" placeholder="Search songs, artists..."
          class="w-full bg-gray-800 rounded-full px-4 py-2 text-sm outline-none focus:ring-2 focus:ring-amber-400 text-white placeholder-gray-500">
      </form>
      <div id="admin-links" class="hidden items-center gap-4">
        <a href="/upload.html" class="text-sm font-medium text-amber-400 hover:text-amber-300">+ Upload</a>
        <a href="/admin.html" class="text-sm font-medium text-gray-400 hover:text-white">Dashboard</a>
      </div>
    </div>
  </nav>

  <main class="max-w-7xl mx-auto px-4 py-6">
    <!-- Player + Lyrics -->
    <div class="flex gap-4 mb-4">
      <!-- Video -->
      <div id="video-col" class="flex-1 min-w-0">
        <div class="aspect-video bg-black rounded-xl overflow-hidden">
          <video id="video-player" class="w-full h-full" controls preload="metadata"></video>
        </div>
      </div>
      <!-- Lyrics -->
      <div id="lyrics-col" class="w-72 shrink-0 hidden lg:block">
        <div class="bg-gray-900 rounded-xl h-full" style="max-height: 56.25vw * 0.5625; min-height: 300px;">
          <div class="px-3 py-2 border-b border-gray-800 flex items-center justify-between">
            <span class="text-xs font-semibold text-gray-400 uppercase tracking-wider">Lyrics</span>
          </div>
          <div id="lyrics-panel" class="overflow-y-auto p-2" style="height: calc(100% - 36px); max-height: 480px;">
            <p id="no-lyrics" class="text-center text-gray-600 py-8 text-sm">No lyrics available</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Track Info -->
    <div class="flex items-start justify-between mb-4 gap-4">
      <div class="min-w-0">
        <h1 id="track-title" class="text-xl font-bold text-white truncate"></h1>
        <p id="track-artist" class="text-gray-400"></p>
        <div class="flex flex-wrap gap-2 mt-2">
          <span id="track-genre" class="hidden text-xs bg-gray-800 text-gray-400 px-2 py-0.5 rounded-full"></span>
          <span id="track-language" class="hidden text-xs bg-gray-800 text-gray-400 px-2 py-0.5 rounded-full"></span>
          <span id="track-views" class="text-xs text-gray-500"></span>
        </div>
      </div>
      <div class="flex items-center gap-3 shrink-0">
        <button id="like-btn" class="flex items-center gap-1.5 px-4 py-2 bg-gray-800 hover:bg-gray-700 rounded-full text-sm transition">
          <span id="like-icon">ü§ç</span>
          <span id="like-count">0</span>
        </button>
        <button id="theater-btn" class="text-xs text-gray-400 hover:text-white px-3 py-2 bg-gray-800 hover:bg-gray-700 rounded-full transition">
          ‚õ∂ Theater
        </button>
        <!-- Mobile lyrics toggle -->
        <button id="lyrics-toggle-btn" class="lg:hidden text-xs text-gray-400 hover:text-white px-3 py-2 bg-gray-800 hover:bg-gray-700 rounded-full transition">
          üéµ Lyrics
        </button>
      </div>
    </div>

    <!-- Mobile Lyrics (3-line rolling window) -->
    <div id="mobile-lyrics" class="lg:hidden bg-gray-900 rounded-xl p-4 mb-4 hidden">
      <div id="mobile-lrc-prev" class="text-center text-gray-600 text-sm py-1 truncate"></div>
      <div id="mobile-lrc-active" class="text-center text-amber-400 font-bold text-base py-1 truncate" style="text-shadow: 0 0 12px rgba(251,191,36,0.4)"></div>
      <div id="mobile-lrc-next" class="text-center text-gray-600 text-sm py-1 truncate"></div>
    </div>

    <!-- Comments -->
    <div class="bg-gray-900 rounded-xl p-5">
      <h2 class="font-semibold text-white mb-4">Comments</h2>

      <!-- Comment form -->
      <form id="comment-form" class="mb-6">
        <div class="flex gap-3 mb-2">
          <input id="comment-name" name="name" type="text" placeholder="Your name" maxlength="50"
            class="w-40 bg-gray-800 rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-amber-400 text-white placeholder-gray-500">
          <input id="comment-content" name="content" type="text" placeholder="Leave a comment..." maxlength="1000"
            class="flex-1 bg-gray-800 rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-amber-400 text-white placeholder-gray-500">
          <button type="submit" class="px-4 py-2 bg-amber-500 hover:bg-amber-400 text-black font-semibold rounded-lg text-sm transition">Post</button>
        </div>
        <p id="comment-error" class="text-red-400 text-xs hidden"></p>
      </form>

      <!-- Comment list -->
      <div id="comment-list" class="space-y-3"></div>
      <p id="no-comments" class="text-gray-600 text-sm text-center py-4">No comments yet. Be the first!</p>
      <button id="load-more-comments" class="hidden mt-4 text-sm text-amber-400 hover:underline w-full text-center">Load more</button>
    </div>
  </main>

  <script src="/js/api.js"></script>
  <script src="/js/lrc-parser.js"></script>
  <script src="/js/player.js"></script>
</body>
</html>
